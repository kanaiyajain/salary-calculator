<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Deal Viewer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <style>
        body {
            background: #f8f9fa;
        }

        .card-img-top {
            max-height: 140px;
            width: 100%;
            object-fit: contain;
            background: #f4f4f4;
        }

        .card-img-large {
            max-height: 140px;
        }

        .card-title {
            font-size: 1rem;
            min-height: 2.5em;
            font-weight: 500;
            white-space: normal;
            overflow: visible;
            text-overflow: unset;
        }

        .card {
            padding: 0.5rem;
            border-radius: 0.5rem;
        }

        .card-body {
            padding: 0.75rem 0.5rem 0.5rem 0.5rem;
        }

        .search-bar {
            max-width: 400px;
            margin: 1.5rem auto;
        }

        .filter-bar {
            max-width: 900px;
            margin: 0 auto 1.5rem;
        }

        .card-columns {
            column-count: 1;
        }

        @media (min-width: 576px) {
            .card-columns {
                column-count: 2;
            }
        }

        @media (min-width: 992px) {
            .card-columns {
                column-count: 4;
            }
        }

        #pagination {
            margin: 2rem 0 1rem;
        }

        #pagination ul.pagination {
            flex-wrap: wrap;
        }

        #pagination .page-link {
            min-width: 80px;
            text-align: center;
        }

        #pageJumpInput {
            max-width: 160px !important;
            min-width: 120px;
            display: inline-block;
        }

        #pageJumpInput::placeholder {
            font-size: 1rem;
        }

        .input-group.mb-2.justify-content-center {
            margin-bottom: 1rem !important;
        }

        .highlight-highest {
            color: #d9534f;
            font-weight: bold;
        }

        .highlight-lowest {
            color: #5cb85c;
            font-weight: bold;
        }

        .highlight-average {
            color: #0275d8;
            font-weight: bold;
        }

        .highlight-discount {
            color: #f0ad4e;
            font-weight: bold;
        }

        .highlight-price {
            color: #fff;
            background-color: #5cb85c;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .highlight-average-price-diff {
            color: #555;
            font-weight: bold;
        }

        .copy-btn {
            margin-left: 0.5rem;
            font-size: 0.95em;
            padding: 0.15rem 0.6rem;
            min-width: 40px;
        }

        .btn-buy-wide {
            min-width: 110px;
        }
    </style>
</head>

<body>
    <div class="container py-4">
        <h1 class="text-center mb-4">CSV Deal Viewer</h1>
        <div class="text-center mb-4">
            <input type="file" id="csvFile" accept=".csv" class="form-control-file d-inline-block"
                style="max-width:300px;">
        </div>
        <div class="search-bar input-group mb-3">
            <input type="text" id="searchInput" class="form-control" placeholder="Search by Name, Code, Store...">
            <div class="input-group-append">
                <button class="btn btn-primary" id="clearSearch" type="button">Clear</button>
            </div>
        </div>
        <div class="filter-bar row mb-3">
            <div class="col-md-3 mb-2">
                <input type="number" id="minPrice" class="form-control" placeholder="Min Price">
            </div>
            <div class="col-md-3 mb-2">
                <input type="number" id="maxPrice" class="form-control" placeholder="Max Price">
            </div>
            <div class="col-md-3 mb-2">
                <select id="storeSelect" class="form-control" style="height:auto;">
                    <option value="">All Stores</option>
                </select>
            </div>
            <div class="col-md-3 mb-2 d-flex align-items-center">
                <label for="discountRange" class="mr-2 mb-0" style="white-space:nowrap;">Discount:</label>
                <input type="range" id="discountRange" min="0" max="100" step="1" value="0" class="custom-range"
                    style="flex:1;">
                <span id="discountRangeValue" class="ml-2" style="min-width:48px;display:inline-block;">0%+</span>
            </div>
            <div class="col-md-3 mb-2">
                <select id="sellerNameSelect" class="form-control" style="height:auto;">
                    <option value="">All Sellers</option>
                </select>
            </div>
            <div class="col-md-3 mb-2">
                <select id="sortSelect" class="form-control" style="height:auto;">
                    <option value="default">Sort: Default</option>
                    <option value="name-asc">Name ↑</option>
                    <option value="name-desc">Name ↓</option>
                    <option value="date-asc">Date ↑</option>
                    <option value="date-desc">Date ↓</option>
                    <option value="price-asc">Price ↑</option>
                    <option value="price-desc">Price ↓</option>
                    <option value="average-asc">Average ↑</option>
                    <option value="average-desc">Average ↓</option>
                    <option value="avg-price-diff-desc">Avg - Price ↓</option>
                    <option value="avg-price-diff-asc">Avg - Price ↑</option>
                </select>
            </div>
            <div class="col-md-3 mb-2 d-flex align-items-center">
                <label for="dateMin" class="mr-2 mb-0" style="white-space:nowrap;">Date ≥</label>
                <input type="datetime-local" id="dateMin" class="form-control mr-2" placeholder="Date & Time ≥">
                <label for="dateMax" class="mr-2 mb-0" style="white-space:nowrap;">Date ≤</label>
                <input type="datetime-local" id="dateMax" class="form-control" placeholder="Date & Time ≤">
            </div>
            <div class="col-md-12 mb-2">
                <button class="btn btn-success btn-block" id="applyFilters">Apply Filters</button>
            </div>
        </div>
        <nav id="pagination" aria-label="Page navigation" class="d-none">
            <ul class="pagination justify-content-center"></ul>
        </nav>
        <div id="cardContainer" class="row"></div>
    </div>
    <script>
        // CSV parsing utility (simple, not RFC4180 full)
        function parseCSV(text) {
            const lines = text.split(/\r?\n/).filter(Boolean);
            const headers = lines[0].split(',');
            return lines.slice(1).map(line => {
                // Handle quoted fields with commas
                const values = [];
                let cur = '', inQuotes = false;
                for (let i = 0; i < line.length; i++) {
                    const char = line[i];
                    if (char === '"') inQuotes = !inQuotes;
                    else if (char === ',' && !inQuotes) { values.push(cur); cur = ''; }
                    else cur += char;
                }
                values.push(cur);
                const obj = {};
                headers.forEach((h, i) => obj[h.trim()] = (values[i] || '').replace(/^"|"$/g, ''));
                return obj;
            });
        }

        let allData = [];
        let filteredData = [];
        let currentPage = 1;
        const pageSize = 60; // doubled from 30

        // Fix SellerId filter, Go to page input, Discount decimal, and search+filter logic
        function renderCardsPage(data, page) {
            const container = document.getElementById('cardContainer');
            if (!data.length) {
                container.innerHTML = '<div class="text-center text-muted">No results found.</div>';
                document.getElementById('pagination').classList.add('d-none');
                return;
            }
            const start = (page - 1) * pageSize;
            const end = Math.min(start + pageSize, data.length);
            const pageData = data.slice(start, end);
            // Render cards in a row-wise grid
            container.innerHTML = pageData.map((row, idx) => {
                let buyUrl = '';
                let storeName = row.Store;
                if (row.Store === '1') {
                    buyUrl = `https://www.amazon.in/dp/${row.Code}`;
                    storeName = 'Amazon';
                } else if (row.Store === '2') {
                    buyUrl = `https://www.flipkart.com/a/p/b?pid=${row.Code}`;
                    storeName = 'Flipkart';
                }
                // Parse new fields (if present)
                let highest = parseInt(row.Highest) || '-';
                let lowest = parseInt(row.Lowest) || '-';
                let average = parseInt(row.Average) || '-';
                let price = parseInt(row.Price) || '-';
                // Calculate Avg - Price difference
                let avgPriceDiff = '-';
                if (!isNaN(row.Average) && !isNaN(row.Price)) {
                    avgPriceDiff = parseInt(row.Average) - parseInt(row.Price);
                    avgPriceDiff = avgPriceDiff.toLocaleString('en-IN');
                }
                let discount = row.Discount || '-';
                if (discount !== '-' && !isNaN(discount)) discount = parseInt(discount);
                // SellerName and LastPrice
                let sellerName = row.SellerName ? row.SellerName : (row.SellerId ? 'Seller ' + row.SellerId : '-');
                let lastPrice = row.LastPrice && !isNaN(row.LastPrice) ? formatCurrencyInt(row.LastPrice) : '-';
                let priceDrop = '-';
                let priceDropHtml = '';
                if (lastPrice !== '-' && price !== '-' && !isNaN(row.LastPrice) && !isNaN(row.Price)) {
                    let drop = parseInt(row.LastPrice) - parseInt(row.Price);
                    if (drop > 0) {
                        priceDrop = drop.toLocaleString('en-IN');
                        priceDropHtml = `<span class=\"ml-2 text-success\" title=\"Price Drop\"><svg width=\"18\" height=\"18\" viewBox=\"0 0 20 20\" fill=\"none\" style=\"vertical-align:middle;\"><path d=\"M10 3v12M10 15l-4-4m4 4l4-4\" stroke=\"#28a745\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg> -₹${priceDrop}</span>`;
                    } else if (drop < 0) {
                        priceDrop = Math.abs(drop).toLocaleString('en-IN');
                        priceDropHtml = `<span class=\"ml-2 text-danger\" title=\"Price Increased\"><svg width=\"18\" height=\"18\" viewBox=\"0 0 20 20\" fill=\"none\" style=\"vertical-align:middle;\"><path d=\"M10 17V5M10 5l-4 4m4-4l4 4\" stroke=\"#dc3545\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg> +₹${priceDrop}</span>`;
                    }
                }
                // Copy button id
                const copyBtnId = `copy-btn-${page}-${idx}`;
                return `
            <div class="col-12 col-sm-6 col-lg-3 mb-3">
                <div class="card shadow-sm">
                    <img class="card-img-top card-img-large" src="${row.Image}" alt="${row.Name}" loading="lazy">
                    <div class="card-body">
                        <h5 class="card-title mb-2" title="${row.Name}">${row.Name}</h5>
                        <div class="d-flex flex-wrap small text-muted mb-2">
                            <div class="mr-3"><span title="Added On">${row.AddedOn}</span></div>
                            <div class="mr-3"><span title="Seller">${sellerName}</span></div>
                            <div class="mr-3"><span title="Store">${storeName}</span></div>
                            <div class="mr-3"><span title="Code">${row.Code}</span></div>
                            <div><span title="Last Price">${lastPrice !== '-' ? 'Last: ₹' + lastPrice : ''}</span>${priceDropHtml}</div>
                        </div>
                        <div class="d-flex flex-wrap small text-muted mb-2">
                            <div class="mr-3 highlight-highest">₹${highest}</div>
                            <div class="mr-3 highlight-average">₹${average}</div>
                            <div class="mr-3 highlight-lowest">₹${lowest}</div>
                            <div class="mr-3 highlight-average-price-diff">₹${avgPriceDiff}</div>
                        </div>
                        <div class="d-flex flex-wrap small text-muted mb-2">
                            <div class="mr-3 highlight-price"><strong>₹${price}</strong></div>
                            <div class="mr-3 highlight-discount">${discount !== '-' ? discount + '%' : '-'}</div>
                        </div>
                        <div class="d-flex align-items-center">
                            ${buyUrl ? `<a href="${buyUrl}" target="_blank" class="btn btn-sm btn-primary btn-buy-wide">Buy</a>` : ''}
                            <button class="btn btn-outline-secondary btn-sm copy-btn" id="${copyBtnId}" data-url="${buyUrl}" title="Copy product URL">Copy</button>
                        </div>
                    </div>
                </div>
            </div>
            `;
            }).join('');
            renderPagination(data.length, page);
            // Attach copy event listeners
            setTimeout(() => {
                document.querySelectorAll('.copy-btn').forEach(btn => {
                    btn.onclick = function () {
                        const url = btn.getAttribute('data-url');
                        if (url) {
                            navigator.clipboard.writeText(url);
                            btn.textContent = 'Copied!';
                            setTimeout(() => { btn.textContent = 'Copy'; }, 1200);
                        }
                    };
                });
            }, 0);
        }

        function renderPagination(total, page) {
            const nav = document.getElementById('pagination');
            const ul = nav.querySelector('ul');
            const pageCount = Math.ceil(total / pageSize);
            if (pageCount <= 1) { nav.classList.add('d-none'); return; }
            nav.classList.remove('d-none');
            ul.innerHTML = '';

            // Previous button
            const prevLi = document.createElement('li');
            prevLi.className = 'page-item' + (page === 1 ? ' disabled' : '');
            const prevA = document.createElement('a');
            prevA.className = 'page-link';
            prevA.href = '#';
            prevA.textContent = 'Previous';
            prevA.style.fontWeight = 'bold';
            prevA.addEventListener('click', function (e) {
                e.preventDefault();
                if (page > 1) {
                    currentPage = page - 1;
                    renderCardsPage(filteredData, currentPage);
                }
            });
            prevLi.appendChild(prevA);
            ul.appendChild(prevLi);

            // Page numbers (show max 5 at a time, centered around current)
            let startPage = Math.max(1, page - 2);
            let endPage = Math.min(pageCount, page + 2);
            if (endPage - startPage < 4) {
                if (startPage === 1) endPage = Math.min(pageCount, startPage + 4);
                else if (endPage === pageCount) startPage = Math.max(1, endPage - 4);
            }
            for (let i = startPage; i <= endPage; i++) {
                const li = document.createElement('li');
                li.className = 'page-item' + (i === page ? ' active' : '');
                const a = document.createElement('a');
                a.className = 'page-link';
                a.href = '#';
                a.textContent = i;
                a.addEventListener('click', function (e) {
                    e.preventDefault();
                    currentPage = i;
                    renderCardsPage(filteredData, currentPage);
                });
                li.appendChild(a);
                ul.appendChild(li);
            }

            // Next button
            const nextLi = document.createElement('li');
            nextLi.className = 'page-item' + (page === pageCount ? ' disabled' : '');
            const nextA = document.createElement('a');
            nextA.className = 'page-link';
            nextA.href = '#';
            nextA.textContent = 'Next';
            nextA.style.fontWeight = 'bold';
            nextA.addEventListener('click', function (e) {
                e.preventDefault();
                if (page < pageCount) {
                    currentPage = page + 1;
                    renderCardsPage(filteredData, currentPage);
                }
            });
            nextLi.appendChild(nextA);
            ul.appendChild(nextLi);
        }

        // Add page jump input to pagination
        const paginationNav = document.getElementById('pagination');
        if (paginationNav && !document.getElementById('pageJumpInput')) {
            const pageJumpDiv = document.createElement('div');
            pageJumpDiv.className = 'input-group mb-2 justify-content-center';
            pageJumpDiv.innerHTML = '<input id="pageJumpInput" type="number" min="1" class="form-control" style="max-width:100px;display:inline-block;" placeholder="Go to page">' +
                '<div class="input-group-append"><button id="pageJumpBtn" class="btn btn-outline-secondary" type="button">Go</button></div>';
            paginationNav.parentNode.insertBefore(pageJumpDiv, paginationNav.nextSibling);
        }

        function populateSellerIdSelect() {
            const select = document.getElementById('sellerNameSelect');
            if (!select) return;
            // Use SellerName for filter, fallback to SellerId if missing
            const sellerNames = Array.from(new Set(allData.map(row => row.SellerName ? String(row.SellerName) : (row.SellerId ? 'Seller ' + row.SellerId : '')).filter(Boolean)));
            sellerNames.sort((a, b) => a.localeCompare(b));
            select.innerHTML = '<option value="">All Sellers</option>' + sellerNames.map(name => `<option value="${name}">${name}</option>`).join('');
        }

        function populateStoreSelect() {
            const select = document.getElementById('storeSelect');
            if (!select) return;
            // Map store IDs to user-friendly names
            const storeMap = { '1': 'Amazon', '2': 'Flipkart' };
            const stores = Array.from(new Set(allData.map(row => row.Store ? String(row.Store) : '').filter(Boolean)));
            select.innerHTML = '<option value="">All Stores</option>' + stores.map(store => {
                const label = storeMap[store] || store;
                return `<option value="${store}">${label}</option>`;
            }).join('');
        }

        // Unified filter/search mechanism
        function getFilteredAndSearchedData() {
            let data = allData;
            const minPrice = parseFloat(document.getElementById('minPrice').value);
            const maxPrice = parseFloat(document.getElementById('maxPrice').value);
            const storeSelect = document.getElementById('storeSelect');
            const discountRange = document.getElementById('discountRange');
            const sellerSelect = document.getElementById('sellerNameSelect');
            const dateMinInput = document.getElementById('dateMin');
            const dateMaxInput = document.getElementById('dateMax');
            let selectedSeller = '';
            if (sellerSelect) {
                selectedSeller = sellerSelect.value;
            }
            let selectedStore = '';
            if (storeSelect) {
                selectedStore = storeSelect.value.trim().toLowerCase();
            }
            let selectedDiscount = 0;
            if (discountRange) {
                selectedDiscount = parseInt(discountRange.value) || 0;
            }
            let dateMin = dateMinInput && dateMinInput.value ? new Date(dateMinInput.value) : null;
            let dateMax = dateMaxInput && dateMaxInput.value ? new Date(dateMaxInput.value) : null;
            const q = document.getElementById('searchInput').value.trim().toLowerCase();
            if (!isNaN(minPrice)) data = data.filter(row => parseFloat(row.Price) >= minPrice);
            if (!isNaN(maxPrice)) data = data.filter(row => parseFloat(row.Price) <= maxPrice);
            if (selectedStore) data = data.filter(row => (row.Store || '').toLowerCase() === selectedStore);
            if (selectedSeller) data = data.filter(row => (row.SellerName ? String(row.SellerName) : (row.SellerId ? 'Seller ' + row.SellerId : '')) === selectedSeller);
            if (selectedDiscount > 0) data = data.filter(row => !isNaN(row.Discount) && parseInt(row.Discount) >= selectedDiscount);
            if (dateMin) data = data.filter(row => row.AddedOn && !isNaN(Date.parse(row.AddedOn)) && new Date(row.AddedOn) >= dateMin);
            if (dateMax) data = data.filter(row => row.AddedOn && !isNaN(Date.parse(row.AddedOn)) && new Date(row.AddedOn) <= dateMax);
            if (q) {
                data = data.filter(row =>
                    (row.Name || '').toLowerCase().includes(q) ||
                    (row.Code || '').toLowerCase().includes(q) ||
                    (row.Store || '').toLowerCase().includes(q)
                );
            }
            // Sorting
            const sortSelect = document.getElementById('sortSelect');
            if (sortSelect) {
                const sortVal = sortSelect.value;
                if (sortVal === 'name-asc') {
                    data = data.slice().sort((a, b) => (a.Name || '').localeCompare(b.Name || ''));
                } else if (sortVal === 'name-desc') {
                    data = data.slice().sort((b.Name || '').localeCompare(a.Name || ''));
                } else if (sortVal === 'date-asc') {
                    data = data.slice().sort((a, b) => {
                        const da = a.AddedOn && !isNaN(Date.parse(a.AddedOn)) ? new Date(a.AddedOn) : new Date(0);
                        const db = b.AddedOn && !isNaN(Date.parse(b.AddedOn)) ? new Date(b.AddedOn) : new Date(0);
                        return da - db;
                    });
                } else if (sortVal === 'date-desc') {
                    data = data.slice().sort((a, b) => {
                        const da = a.AddedOn && !isNaN(Date.parse(a.AddedOn)) ? new Date(a.AddedOn) : new Date(0);
                        const db = b.AddedOn && !isNaN(Date.parse(b.AddedOn)) ? new Date(b.AddedOn) : new Date(0);
                        return db - da;
                    });
                } else if (sortVal === 'price-asc') {
                    data = data.slice().sort((a, b) => (parseFloat(a.Price) || 0) - (parseFloat(b.Price) || 0));
                } else if (sortVal === 'price-desc') {
                    data = data.slice().sort((a, b) => (parseFloat(b.Price) || 0) - (parseFloat(a.Price) || 0));
                } else if (sortVal === 'average-asc') {
                    data = data.slice().sort((a, b) => (parseFloat(a.Average) || 0) - (parseFloat(b.Average) || 0));
                } else if (sortVal === 'average-desc') {
                    data = data.slice().sort((a, b) => (parseFloat(b.Average) || 0) - (parseFloat(a.Average) || 0));
                } else if (sortVal === 'avg-price-diff-desc') {
                    data = data.slice().sort((a, b) => {
                        const diffA = (parseFloat(a.Average) || 0) - (parseFloat(a.Price) || 0);
                        const diffB = (parseFloat(b.Average) || 0) - (parseFloat(b.Price) || 0);
                        return diffB - diffA;
                    });
                } else if (sortVal === 'avg-price-diff-asc') {
                    data = data.slice().sort((a, b) => {
                        const diffA = (parseFloat(a.Average) || 0) - (parseFloat(a.Price) || 0);
                        const diffB = (parseFloat(b.Average) || 0) - (parseFloat(b.Price) || 0);
                        return diffA - diffB;
                    });
                }
                // default: no sort
            }
            return data;
        }
        function applyFilters() {
            filteredData = getFilteredAndSearchedData();
            currentPage = 1;
            renderCardsPage(filteredData, currentPage);
        }

        document.getElementById('csvFile').addEventListener('change', function (e) {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function (evt) {
                allData = parseCSV(evt.target.result);
                filteredData = allData;
                currentPage = 1;
                populateSellerIdSelect();
                populateStoreSelect();
                renderCardsPage(filteredData, currentPage);
                // Always re-attach event listener after repopulating
                const sellerIdSelect = document.getElementById('sellerNameSelect');
                if (sellerIdSelect) {
                    sellerIdSelect.removeEventListener('change', applyFilters);
                    sellerIdSelect.addEventListener('change', applyFilters);
                }
                const storeSelect = document.getElementById('storeSelect');
                if (storeSelect) {
                    storeSelect.removeEventListener('change', applyFilters);
                    storeSelect.addEventListener('change', applyFilters);
                }
                const discountRange = document.getElementById('discountRange');
                if (discountRange) {
                    discountRange.removeEventListener('input', onDiscountRangeChange);
                    discountRange.addEventListener('input', onDiscountRangeChange);
                }
            };
            reader.readAsText(file);
        });

        document.getElementById('searchInput').addEventListener('input', function () {
            filteredData = getFilteredAndSearchedData();
            currentPage = 1;
            renderCardsPage(filteredData, currentPage);
        });
        document.getElementById('clearSearch').addEventListener('click', function () {
            document.getElementById('searchInput').value = '';
            filteredData = getFilteredAndSearchedData();
            renderCardsPage(filteredData, 1);
        });
        document.getElementById('applyFilters').addEventListener('click', applyFilters);
        // Add event for SellerName select
        const sellerNameSelect = document.getElementById('sellerNameSelect');
        if (sellerNameSelect) {
            sellerNameSelect.addEventListener('change', applyFilters);
        }
        // Add event for Store and Discount select
        const storeSelect = document.getElementById('storeSelect');
        if (storeSelect) {
            storeSelect.addEventListener('change', applyFilters);
        }
        const discountRange = document.getElementById('discountRange');
        if (discountRange) {
            discountRange.addEventListener('input', onDiscountRangeChange);
        }
        // Add event for page jump
        const pageJumpBtn = document.getElementById('pageJumpBtn');
        const pageJumpInput = document.getElementById('pageJumpInput');
        if (pageJumpBtn && pageJumpInput) {
            pageJumpBtn.addEventListener('click', function () {
                const val = parseInt(pageJumpInput.value);
                const pageCount = Math.ceil(filteredData.length / pageSize);
                if (!isNaN(val) && val >= 1 && val <= pageCount) {
                    currentPage = val;
                    renderCardsPage(filteredData, currentPage);
                }
            });
        }
        const sortSelect = document.getElementById('sortSelect');
        if (sortSelect) {
            sortSelect.addEventListener('change', applyFilters);
        }
        const dateMinInput = document.getElementById('dateMin');
        if (dateMinInput) {
            dateMinInput.addEventListener('change', applyFilters);
        }
        const dateMaxInput = document.getElementById('dateMax');
        if (dateMaxInput) {
            dateMaxInput.addEventListener('change', applyFilters);
        }

        function onDiscountRangeChange() {
            const val = document.getElementById('discountRange').value;
            document.getElementById('discountRangeValue').textContent = val + '%+';
            applyFilters();
        }

        function formatCurrencyInt(val) {
            if (val === '-' || val === undefined || val === null || isNaN(val)) return val;
            return parseInt(val).toLocaleString('en-IN');
        }
    </script>
</body>

</html>
